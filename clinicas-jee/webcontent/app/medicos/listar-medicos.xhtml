<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<ui:composition>

<div>
	<div style="height:50px; width:100%; background-color: purple;">
		<span style="color: white;">Listagem de MÃ©dicos</span>
	</div>
	
	<h:form>
		<div style="width:900px; background-color: aqua; margin-left: auto; margin-right: auto;">
			<div class="ui-g">
		    <div class="ui-g-2"><span class="label">Nome : </span></div>
		    <div class="ui-g-4">
		    	<p:inputText value="#{medicoController.parametrosBusca.nome}" style="width: 226px;" />
		    </div>
		    
		    <div class="ui-g-2"><span class="label">CPF : </span></div>
		    <div class="ui-g-4">
		    	<p:inputText value="#{medicoController.parametrosBusca.cpf}" style="width: 226px;" />
		    </div>
			</div>
			
			<div class="ui-g">
		    <div class="ui-g-2"><span class="label">Estado CRM : </span></div>
		    <div class="ui-g-4">
		    	<p:selectOneMenu value="#{medicoController.parametrosBusca.estadoCrm.id}" style="width: 200px;">
            <f:selectItems value="#{medicoController.estados}" var="e" itemLabel="#{e.nome}" itemValue="#{e.id}" />
        	</p:selectOneMenu>
		    </div>
		    
		    <div class="ui-g-2"><span class="label">Especialidade : </span></div>
		    <div class="ui-g-4">
		    	<p:selectOneMenu value="#{medicoController.parametrosBusca.especialidade.id}" style="width: 200px;">
            <f:selectItems value="#{medicoController.especialidades}" var="e" itemLabel="#{e.nome}" itemValue="#{e.id}" />
        	</p:selectOneMenu>
		    </div>
			</div>
			
			<div class="ui-g">
				<div class="ui-g-8"></div>
				
				<div class="ui-g-4">
					<p:commandButton 
						value="Limpar" 
						actionListener="#{medicoController.limparBusca}" 
						update="@form, medicos" />
					<!-- style="margin-top: 10px; margin-left: 148px;" -->
						
					<p:commandButton 
						value="Cadastrar" 
						actionListener="#{medicoController.iniciarCadastro}"
						immediate="true"
						update="cadMedicoForm"
						oncomplete="PF('cadMedicoDialog').show();" />
					<!-- update="medicos" style="margin-top: 10px; margin-left: 148px;" -->
				</div>
			</div>
		</div>
	</h:form>

	<h:form prependId="false">
	<p:dataTable 
		id="medicos" 
		value="#{medicoController.medicos}" var="m" 
		scrollable="true" scrollHeight="188"
		editable="true">
		
		<p:ajax event="rowEdit" listener="#{medicoController.onRowEdit}" /><!-- update=":form:msgs" -->
    <p:ajax event="rowEditCancel" listener="#{medicoController.onRowCancel}" />
		
		<p:column headerText="Foto" width="150" resizable="false">
			
		</p:column>
		
		<p:column headerText="Nome">
			<p:cellEditor>
				<f:facet name="output"><h:outputText value="#{m.nome}" /></f:facet>
				<f:facet name="input"><p:inputText value="#{m.nome}" style="width:100%" label="Nome"/></f:facet>
			</p:cellEditor>
		</p:column>
		
		<p:column headerText="CPF" width="150" resizable="false">
			<h:outputText value="#{m.cpf}" />
		</p:column>
		<p:column headerText="Especialidade" width="200">
			<h:outputText value="#{m.especialidade.nome}" />
		</p:column>
		<p:column headerText="Telefone" width="150" resizable="false">
			<h:outputText value="#{m.telefone}" />
		</p:column>
		
		<p:column headerText="" width="70" resizable="false">
			<p:commandButton update="cadMedicoForm" oncomplete="PF('cadMedicoDialog').show();" icon="ui-icon-search">
				<f:setPropertyActionListener value="#{m}" target="#{medicoController.entidadeCadastro}" />
			</p:commandButton>
		</p:column>
		
		<p:column style="width:45px">
			<p:rowEditor />
		</p:column>
	</p:dataTable>
	</h:form>	
</div>

<ui:include src="cadastrar-medico.xhtml"></ui:include>

</ui:composition>
</html>
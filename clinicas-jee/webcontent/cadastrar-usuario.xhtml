<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<ui:composition>
	
	<h:form id="frmUsuario" enctype="multipart/form-data">
	
		<div style="width: 800px;">	
		<!-- <p:panel header="Formulário de Cadastro de Usuário"> -->
			<div class="ui-g">
		    <div class="ui-g-2"><h:outputText value="Nome : " /></div>
		    <div class="ui-g-9">
		    	<p:inputText 
		    		id="nome" 
		    		value="#{usuarioController.usuario.nome}"
		    		required="true" requiredMessage="O nome é obrigatório!" 
		    		style="width: 300px;" />
		    </div>
			</div>
		
			<div class="ui-g">
				<div class="ui-g-2"><h:outputText value="Email : " /></div>
				<div class="ui-g-9">
					<p:inputText 
						id="email" 
						value="#{usuarioController.usuario.email}" 
						required="true" requiredMessage="O email é obrigatório!"
						style="width: 300px;" 
						validator="emailValidator" />
				</div>
			</div>
			
			<div class="ui-g">
				<div class="ui-g-2"><h:outputText value="Senha : " /></div>
				<div class="ui-g-4">
					<p:password 
						id="senha" 
						value="#{usuarioController.senha}" 
						match="confirmacao" />
				</div>
				
				<div class="ui-g-2"><h:outputText value="Confirmação : " /></div>
		    <div class="ui-g-4">
		    	<p:password id="confirmacao" value="#{usuarioController.senha}" />
		    </div>
	    </div>
	    
			<p:fileUpload 
				fileUploadListener="#{usuarioController.handleImagemUpload}" 
				mode="advanced" 
				dragDropSupport="false"
        sizeLimit="100000" 
        fileLimit="1" 
        allowTypes="/(\.|\/)(gif|jpe?g|png)$/" 
        label="Escolher" uploadLabel="Enviar" cancelLabel="Cancelar"
        invalidFileMessage="São permitidas somente imagens (gif, jpeg, jpg e png)" />
				
			<div class="ui-g" style="width: 700px;">
				<p:commandButton 
					value="Criar conta" 
					action="#{usuarioController.salvar}" 
					rendered="#{usuarioController.usuario.id == null}" />
					
				<p:commandButton 
					value="Atualizar" 
					action="#{usuarioController.atualizar}" 
					rendered="#{usuarioController.usuario.id != null}" 
					update="login-panel" />
			</div>
		</div>
		
	</h:form>
	
</ui:composition>
</html>